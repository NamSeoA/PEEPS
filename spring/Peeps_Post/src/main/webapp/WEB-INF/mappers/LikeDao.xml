<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gnjk.post.mypost.dao.LikeDao">

	<!-- 좋아요 조회 -->
	<select id="selectLike" resultType="int">
		select count(*) from postlike 
		where lpost_idx=#{param1}
		and lmember_idx=#{param2}
	</select>
	
	<!-- (최초)좋아요 생성 -->
	<insert id="insertLike">
		insert into postlike
		(lpost_idx, lmember_idx, like_chk)
		values
		(#{param1}, #{param2}, #{param3})
	</insert>
	
	<!-- 좋아요 like_chk 값 확인 -->
	<select id="selectLikeChk" resultType="int">
		select like_chk from postlike 
		where lpost_idx=#{param1}
		and lmember_idx=#{param2}
	</select>
	
	<!-- 좋아요 like_chk 값 update -->
	<update id="updateLike">
		update postlike 
		set like_chk=#{param3}
		where lpost_idx=#{param1} 
		and lmember_idx=#{param2}
	</update>
	
	<!-- 21.02.24 한경 추가 -->
	<!-- 좋아요 유저 idx 값 리스트 -->
	<select id="m_idxList" resultType="int">
		select lmember_idx from postlike where lpost_idx = #{lpost_idx}
	</select>
	
	<!-- 좋아요 유저 정보 리스트   -->
	<select id="LikeList" resultType="com.gnjk.post.mypost.domain.LikeRequest">
		select id, m_photo, m_idx, loginType from member where m_idx = #{m_idx}
	</select>
	
	<!-- 좋아요 팔로우 확인 -->
	<select id="LikeFollowChk" resultType="int">
		select count(*) from follow where following_id=#{lm_idx} and follower_id = #{m_idx}
	</select>
	
	
</mapper>